{"ast":null,"code":"/**\n * @internal\n */\nexport function augmentWebsocket(webSocket, debug) {\n  webSocket.terminate = function () {\n    const noOp = () => {};\n    // set all callbacks to no op\n    this.onerror = noOp;\n    this.onmessage = noOp;\n    this.onopen = noOp;\n    const ts = new Date();\n    const origOnClose = this.onclose;\n    // Track delay in actual closure of the socket\n    this.onclose = closeEvent => {\n      const delay = new Date().getTime() - ts.getTime();\n      debug(`Discarded socket closed after ${delay}ms, with code/reason: ${closeEvent.code}/${closeEvent.reason}`);\n    };\n    this.close();\n    origOnClose.call(this, {\n      code: 4001,\n      reason: 'Heartbeat failure, discarding the socket',\n      wasClean: false\n    });\n  };\n}","map":{"version":3,"names":["augmentWebsocket","webSocket","debug","terminate","noOp","onerror","onmessage","onopen","ts","Date","origOnClose","onclose","closeEvent","delay","getTime","code","reason","close","call","wasClean"],"sources":["C:/Users/hp/coChat/node_modules/@stomp/rx-stomp/node_modules/@stomp/stompjs/esm6/augment-websocket.js"],"sourcesContent":["/**\n * @internal\n */\nexport function augmentWebsocket(webSocket, debug) {\n    webSocket.terminate = function () {\n        const noOp = () => { };\n        // set all callbacks to no op\n        this.onerror = noOp;\n        this.onmessage = noOp;\n        this.onopen = noOp;\n        const ts = new Date();\n        const origOnClose = this.onclose;\n        // Track delay in actual closure of the socket\n        this.onclose = closeEvent => {\n            const delay = new Date().getTime() - ts.getTime();\n            debug(`Discarded socket closed after ${delay}ms, with code/reason: ${closeEvent.code}/${closeEvent.reason}`);\n        };\n        this.close();\n        origOnClose.call(this, {\n            code: 4001,\n            reason: 'Heartbeat failure, discarding the socket',\n            wasClean: false,\n        });\n    };\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAO,SAASA,gBAAgBA,CAACC,SAAS,EAAEC,KAAK,EAAE;EAC/CD,SAAS,CAACE,SAAS,GAAG,YAAY;IAC9B,MAAMC,IAAI,GAAGA,CAAA,KAAM,CAAE,CAAC;IACtB;IACA,IAAI,CAACC,OAAO,GAAGD,IAAI;IACnB,IAAI,CAACE,SAAS,GAAGF,IAAI;IACrB,IAAI,CAACG,MAAM,GAAGH,IAAI;IAClB,MAAMI,EAAE,GAAG,IAAIC,IAAI,CAAC,CAAC;IACrB,MAAMC,WAAW,GAAG,IAAI,CAACC,OAAO;IAChC;IACA,IAAI,CAACA,OAAO,GAAGC,UAAU,IAAI;MACzB,MAAMC,KAAK,GAAG,IAAIJ,IAAI,CAAC,CAAC,CAACK,OAAO,CAAC,CAAC,GAAGN,EAAE,CAACM,OAAO,CAAC,CAAC;MACjDZ,KAAK,CAAE,iCAAgCW,KAAM,yBAAwBD,UAAU,CAACG,IAAK,IAAGH,UAAU,CAACI,MAAO,EAAC,CAAC;IAChH,CAAC;IACD,IAAI,CAACC,KAAK,CAAC,CAAC;IACZP,WAAW,CAACQ,IAAI,CAAC,IAAI,EAAE;MACnBH,IAAI,EAAE,IAAI;MACVC,MAAM,EAAE,0CAA0C;MAClDG,QAAQ,EAAE;IACd,CAAC,CAAC;EACN,CAAC;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}